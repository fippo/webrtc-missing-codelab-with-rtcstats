<html>
<head>
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
    <link rel="stylesheet" href="/main.css"/>
</head>
<body>
    <div class="container">
        <div class="videocontainer left">
            <video id="localVideo" autoplay muted playsinline></video>
            <div id="localStats"></div>
        </div>
        <div class="videocontainer right">
            <div id="connectionState">&#x1f4f6;</div>
            <video id="remoteVideo" autoplay playsinline></video>
            <div id="remoteStats"></div>
        </div>
        <div class="left">
            <p>Client ID: <span id="clientId"></span><button id="copyBtn">copy</button></p>
            <p>
                <button id="audioBtn">mute audio</button>
                <button id="videoBtn">mute video</button>
                <button id="shareBtn">share screen</button>
            </p>
            <p>
                <label>Force TURN:</label>
                <input type="checkbox" id="forceturn">
            </p>
            <p>
                <label>Bandwidth:</label>
                <select id="bandwidth">
                    <option value="unlimited" selected>unlimited</option>
                    <option value="2000">2000</option>
                    <option value="1000">1000</option>
                    <option value="500">500</option>
                    <option value="250">250</option>
                    <option value="125">125</option>
                </select>kbps
            </p>
            <p>
                <label>Codec preferences:</label>
                <select id="codecPreferences" disabled>
                    <option selected value="">Default</option>
                </select>
            </p>
        </div>
        <div class="right">
            <p>Peer ID: <input id="peerId" placeholder="whom to call" size=40></input></p>
            <p>
                <button id="callButton">call</button>
                <button id="answerButton" disabled>answer</button>
                <button id="hangupButton" disabled>hangup</button>
            </p>
            <p>
                <button id="iceRestart" disabled>Do an ICE restart</button>
            </p>
        </div>
    </div>
    <div>
        <p>Note: works best in Chrome 143+ with <code>--force-fieldtrials=WebRTC-RFC8888CongestionControlFeedback/Enabled,offer:true/WebRTC-Bwe-ScreamV2/Enabled/</code></p>
        <p>In Chrome Beta/Canary use --disable-webrtc-encryption to see the RTCP packets directly in Wireshark without going via RTP dump export.</p>
        <p>Known bugs:
          <ul>
            <li>ECN does not work on Windows.</li>
            <li>When using TURN Chrome/libWebRTC removes the ECN bit (if forwarded by the TURN server), see <a href="https://issues.webrtc.org/issues/42225697#comment104">here</a>.</li>
          </ul>
        </p>
        <p>Find the source code on github <a href="https://github.com/fippo/webrtc-missing-codelab-with-rtcstats">here</a>.
    </div>
    <script src="/main.js"></script>
</body>
